<html>
	<head>
		<style>
			.post {
				 list-style-type: none;
			}
		</style>
		
		<script src='jquery-1.7.2.min.js' ></script>
		<script>
			$(document).ready(function(){
				$('#post').bind('keypress', function(e) {
					if (e.which == 13){
						send();
					}
				});
				document.domain = 'localhost';
				getPosts();
			});
			
			function getPosts()
			{
				$.ajax({
					url: "http://localhost:8080/blog",
					dataType: 'json'
				}).done(function(data){
					
					for(i=0; i < data.length; i++)
					{
						$('#results').append('<li class="post">' + data[i].message + '</li>');
					}
						
 				}).error(function(jqXHR, textStatus){
 					alert(jqXHR.status)
 				});
			}

			function send()
			{
				var post = $('#post').val()
				
				if (post != '')
				{
					var json = {message : post}
					$.ajax({
						url: "http://localhost:8080/blog",
						type: "POST",
						data: JSON.stringify(json)
					})
					var html = '<li class="post">' + post + '</li>';
					$(html).hide().appendTo("#results").fadeIn(1000);
					
					$('#post').val('')
				}
			}
		</script>
	</head>
	<body>
		<input type='text' id='post'>
		<input type='button' id='send' value='Send' onClick='send();'/>
		<br><br>
		
		<div id='results'></div>
	</body>
	
</html>
